## Використання Raspberry Pi для запуску WebQuiz

Цей розділ описує, як підготувати **Raspberry Pi** для роботи з **WebQuiz** за допомогою готового системного образу.
У результаті ви отримаєте пристрій, який автоматично запускає локальний сервер тестування у вашій Wi-Fi мережі.

---

### Завантаження готового образу

[Завантажте підготовлений **Raspberry Pi Image**](https://drive.google.com/file/d/1WGOqSV0EW4xdvod2N4VoU_q6p2plXO9z/view?usp=sharing).
Скористайтеся стандартною програмою **Raspberry Pi Imager** або будь-яким іншим інсталятором для запису образів на SD-карту.

Під час налаштування в **Raspberry Pi Imager** не забудьте:
- задати правильну мережу Wi-Fi (SSID та пароль);
- увімкнути SSH (за бажанням);
- вказати ім’я користувача й пароль, якщо плануєте подальше адміністрування.

Після запису вставте SD-карту у Raspberry Pi та запустіть пристрій.

---

### Перше завантаження

Перший запуск Raspberry Pi призначений для **первинної розмітки SD-картки**.
Система автоматично підготує файлову структуру та виконає базові дії налаштування.

Після завершення цього процесу Raspberry Pi можна вимкнути, витягнути SD-карту й виконати подальшу підготовку на комп’ютері.

---

### Розмітка SD-картки

Після першого запуску потрібно **розбити SD-карту на дві області**:

1. **Основна системна область**
   Не змінюйте її вміст — лише зменшіть розмір, щоб звільнити місце для другої частини.
   Ця область містить операційну систему та встановлений WebQuiz.

2. **Область даних**
   Створіть новий розділ у форматі **exFAT** і назвіть його **`data`**.
   Саме цей розділ WebQuiz використовуватиме для збереження тестів, результатів і конфігураційних файлів.

Розділ `data` доступний із будь-якої ОС (Windows, macOS, Linux).
Ви можете копіювати, редагувати або видаляти файли напряму.

---

### Рекомендоване програмне забезпечення для розмітки

Для створення й редагування розділів можна скористатися такими програмами:

- **Windows:**
  - [MiniTool Partition Wizard](https://www.partitionwizard.com/)
  - [AOMEI Partition Assistant](https://www.diskpart.com/)
  - Вбудована консольна утиліта **Disk Management (diskmgmt.msc)**

- **macOS:**
  - Вбудована програма **Disk Utility**
  - [Paragon Hard Disk Manager](https://www.paragon-software.com/home/hdm-mac/)

- **Linux:**
  - **GParted** (графічна утиліта)
  - Консольні інструменти: `fdisk`, `parted`, `lsblk`, `mkfs.exfat`

Переконайтеся, що новий розділ створено у форматі **exFAT**, а системна частина залишилась незмінною.

---

### Друге завантаження Raspberry Pi

Після розмітки вставте SD-карту назад у Raspberry Pi та запустіть пристрій.
**Друге завантаження** може тривати до **30 хвилин** — у цей час система автоматично:

- під’єднується до Wi-Fi (налаштовано в Raspberry Pi Image);
- завантажує потрібні пакети з [Ansible-репозиторію](https://github.com/oduvan/webquiz-ansible);
- встановлює всі залежності для WebQuiz;
- готує файлову структуру.

---

> ⚠️ **Порада:** друге завантаження може тривати до 30 хвилин.
> У цей період Raspberry Pi автоматично встановлює всі необхідні пакети.
> Не вимикайте живлення, доки індикатор активності SD-карти не перестане блимати.

---

### Конфігурація Wi-Fi

Після другого запуску у розділі **`data`** з’явиться файл **`wifi.conf.example`**, який служить шаблоном для створення вашого власного файлу **`wifi.conf`**.
Саме **`wifi.conf`** використовується системою для підключення до Wi-Fi або створення власної точки доступу (*Hotspot*).

#### Файл `wifi.conf`

Щоб активувати Wi-Fi або створити точку доступу, у розділі `data` створіть файл:

```
wifi.conf
```

Залежно від ваших потреб він може мати одну з наведених нижче конфігурацій.

---

#### Підключення до існуючої Wi-Fi мережі

```
SSID="tp-fregat2"
PASSWORD="0675225288"
```

У цьому випадку Raspberry Pi приєднається до існуючої мережі Wi-Fi.

---

#### Створення власної точки доступу (Hotspot)

```
HOTSPOT=1
SSID="dov"
PASSWORD="11223344"
IPADDR="10.42.0.1/24"
```

У цьому режимі Raspberry Pi створює власну Wi-Fi мережу з іменем `dov` і паролем `11223344`.
IP-адреса `10.42.0.1` зарезервована для самого Raspberry Pi — саме за цією адресою буде доступний сервер WebQuiz у браузері.

> ⚠️ **Обмеження:** Raspberry Pi може працювати як точка доступу, але одночасно підтримує обмежену кількість клієнтів (зазвичай не більше 5–6).
> Після цього можливі проблеми зі швидкістю або відключення користувачів.

> **Рекомендація:** Якщо вам потрібно під'єднати більше пристроїв, краще використати окремий Wi-Fi роутер, підключений до Raspberry Pi у режимі **Bridge (Repeater / Access Point Client)**.
> Такий роутер розширить зону дії Wi-Fi і дозволить безпечно працювати більшій кількості користувачів.

---

#### Приклад із фіксованою IP-адресою для домашньої мережі

```
SSID="my_home_wifi"
PASSWORD="12345678"
IPADDR="192.168.0.150/24"
```

У цьому випадку Raspberry Pi приєднається до існуючої Wi-Fi мережі й автоматично закріпить IP-адресу `192.168.0.150`.
Сервер WebQuiz буде доступний за адресою:

```
http://192.168.0.150:8080
```

---

### Поведінка у режимі Hotspot

Коли Raspberry Pi працює у режимі точки доступу:
- При підключенні користувача до Wi-Fi мережі автоматично відкривається сторінка у браузері з кнопкою **«Почати тест»**.
- Таким чином, користувачеві не потрібно вводити адресу вручну.
- Веб-інтерфейс тестування запускається одразу після з’єднання.

---

### Додаткові можливості Raspberry Pi

WebQuiz на Raspberry Pi також включає **вбудований файловий сервер**.
Цей сервер дозволяє розміщувати навчальні матеріали, які можна завантажувати з тієї ж сторінки, де проводяться тести.

Викладач може завантажити PDF-документи, презентації або відеофайли до відповідної директорії у розділі `data`.
Після цього всі студенти, які приєдналися до мережі, зможуть:
- проходити тести;
- **переглядати або завантажувати навчальні матеріали** у локальній мережі без інтернету.

---

### Завершення налаштування

Після створення або зміни файлу `wifi.conf` перезапустіть Raspberry Pi.
Після завантаження система автоматично активує з’єднання та запустить сервер **WebQuiz**.

Ви можете підключитися до нього через браузер за адресою:
```
http://raspberrypi.local:8080
```
або за IP-адресою, зазначеною у файлі конфігурації.

---

### Поради та примітки

- Розділ **`data`** використовується для всіх створених тестів, логів, результатів та Wi-Fi конфігурацій.
- Якщо потрібно перевстановити систему, можна просто перезаписати образ, **не видаляючи розділ `data`** — усі файли залишаться.
- Для зміни Wi-Fi налаштувань достатньо відредагувати `wifi.conf` і перезапустити пристрій.
- Якщо пристрій не з’єднується з Wi-Fi, перевірте, чи правильно вказано SSID та пароль, або спробуйте режим Hotspot.
